

<mat-tab-group class="card" style="margin: 20px;">
    <mat-tab label="Auto-generate Messages"> 
        <div class="card" style="min-height: 100px; margin: 10px;">
            <mat-progress-bar *ngIf="progress" mode="indeterminate"></mat-progress-bar>
            <div *ngIf="msggenerate" class="card">
                <p style="background-color: rgb(190, 243, 109); width: fit-content; height: fit-content; padding: 5px 20px 0px 20px; margin: 10px;"><label><b>process_id : </b></label>{{pid}}</p>   
            </div>
            <div *ngIf="stopmsg" class="card">
                <p style="background-color: rgb(248, 170, 170); width: fit-content; height: fit-content; padding: 5px 20px 0px 20px; margin: 10px;">{{stopresponse}}</p>   
            </div>
            <table style="margin-top: 30px;">
                <tr>
                    <td><label>Number of Messages</label></td>
                    <td><input type="number" required class="form-control" (keyup)="valid()" [(ngModel)]="num_msgs"></td>
                </tr>
                <tr>
                    <td><label>Percentage of Anomaly Messages</label></td>
                    <td><input type="number" min="0" max="100" class="form-control" (keyup)="valid()" [(ngModel)]="anomaly_percent">
                        <span style="font-size: 10px; color: red;" *ngIf="!(anomaly_percent >=0 && anomaly_percent <=100 || anomaly_percent == undefined) ">**Enter valid Anomaly_percent between 0 to 100 </span></td>
                    
                </tr>
            </table>

            <div style="margin: 30px 10px 10px 20px;">
                <button class="btn btn-success" (click)="generate()" [disabled]="!fieldvalid || progress">Generate Messages</button>
                <button class="btn btn-danger" style="margin-left: 5px;"  [disabled]="!progress" (click)="stop()">Stop Messages</button>
            </div>

        </div>
    </mat-tab>

    <!-- wfewd -->

<!------------------------------- Manual-generate Message--------------------- -->
    <mat-tab label="Manual-generate Messages">
        <mat-form-field class="example-chip-list">
            <mat-label>Parameters</mat-label>
            <mat-chip-list #chipList aria-label="Field selection">
              <mat-chip
                *ngFor="let param of params"
                [selectable]="selectable"
                [removable]="removable"
                (removed)="remove(param)">
                {{param}}
                <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
              </mat-chip>
              <input
                placeholder="New field..."
                #fieldInput
                [formControl]="fieldCtrl"
                [matAutocomplete]="auto"
                [matChipInputFor]="chipList"
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                (matChipInputTokenEnd)="add($event)">
            </mat-chip-list>
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
              <mat-option *ngFor="let field of fields" [value]="field">
                {{field}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
          
        <div  class="card" style="min-height: 100px;">
            <table>
                <tr>
                    <th>MESSAGE PARAMETER</th>
                    <th>VALUE</th>
                </tr>
                <br>
                <tr>
                    <td><label>CGADDR</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['CGADDR']"></td>
                </tr>
                <tr>
                    <td><label>CDADDR</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['CDADDR']"></td>
                </tr>
                <tr>
                    <td><label>OPCODE</label></td>
                    <td><select class="form-control" [(ngModel)]="MSG_FORMAT['OPCODE']"><option disabled>SELECT INVALID OPCODE</option><option *ngFor="let opcode of OPCODE_mapping | keyvalue">{{opcode.key}}</option></select></td>
                    <!-- <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['OPCODE']"></td> -->
                </tr>
                <tr>
                    <td><label>LINKSET</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['LSET']"></td>
                </tr>
                <!-- ------------------------------------------------------------------------------------------- -->
                <tr *ngIf="fieldVisiblity['OPC']">
                    <td><label>OPC</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['OPC']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['DPC']">
                    <td><label>DPC</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['DPC']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['CDTT']">
                    <td><label>CDTT</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['CDTT']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['CDNP']">
                    <td><label>CDNP</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['CDNP']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['CDNAI']">
                    <td><label>CDNAI</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['CDNAI']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['CDCN']">
                    <td><label>CDCN</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['CDCN']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['CDLOC']">
                    <td><label>CDLOC</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['CDLOC']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['CGTT']">
                    <td><label>CGTT</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['CGTT']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['CGNP']">
                    <td><label>CGNP</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['CGNP']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['CGNAI']">
                    <td><label>CGNAI</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['CGNAI']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['CGCN']">
                    <td><label>CGCN</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['CGCN']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['CGLOC']">
                    <td><label>CGLOC</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['CGLOC']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['ATYPE']">
                    <td><label>ATYPE</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['ATYPE']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['ASUBTYPE']">
                    <td><label>ASUBTYPE</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['ASUBTYPE']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['CLSF']">
                    <td><label>CLSF</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['CLSF']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['CAT']">
                    <td><label>CAT</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['CAT']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['MSISDN']">
                    <td><label>MSISDN</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['MSISDN']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['IMSI']">
                    <td><label>IMSI</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['IMSI']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['CLLI']">
                    <td><label>CLLI</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['CLLI']"></td>
                </tr>
                <tr *ngIf="fieldVisiblity['SameCountryCode']">
                    <td><label>SameCountryCode</label></td>
                    <td><input type="text" class="form-control" [(ngModel)]="MSG_FORMAT['SameCountryCode']"></td>
                </tr>
            </table>
            <div style="margin: 30px 10px 10px 10px;">
                <button class="btn btn-success" (click)="manual()">Generate</button>
            </div>
        </div>
        <br>
        <div style="margin: 20px; ">
            <div style="height: 18px; background-color: rgb(158, 157, 157); width: 95%;border-top-left-radius: 7px; border-top-right-radius: 7px;"></div>
            <div style="min-height: 50px; background-color: rgb(10, 10, 10); color: white; width: 95%; padding: 10px;">
                <div id="resmsg" ></div>
                <!-- *ngFor="let a of manualmsg" -->
            </div>
        </div>
    </mat-tab>
  </mat-tab-group>
